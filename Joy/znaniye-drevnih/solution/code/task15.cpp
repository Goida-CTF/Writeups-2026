#include "Ве_крест_крест.h"

внедрить хутор Русь;

целина беззнак(целина б)
{
    коли (б < 0) б = б + 256;
    воздать б;
}

целина длина_руны(целина первый_байт)
{
    коли ((первый_байт & 128) == 0) воздать 1;
    коли ((первый_байт & 224) == 192) воздать 2;
    коли ((первый_байт & 240) == 224) воздать 3;
    коли ((первый_байт & 248) == 240) воздать 4;
    воздать 1;
}

царь_батюшка_главный()
{
    вперёд_славяне;

    много_букав слово;
    внемлить >> слово;

    мерило лев = 0;
    мерило прав = слово.размер();

    покуда (лев < прав)
    {
        целина л0 = беззнак(слово[лев]);
        целина лдлина = длина_руны(л0);
        коли (лев + (мерило)лдлина > прав) лдлина = (целина)(прав - лев);

        мерило прав_конец = прав;
        мерило прав_нач = прав_конец - 1;

        целина б = беззнак(слово[прав_нач]);
        покуда (прав_нач > лев && ((б & 192) == 128))
        {
            --прав_нач;
            б = беззнак(слово[прав_нач]);
        }

        целина рдлина = (целина)(прав_конец - прав_нач);

        коли (лдлина != рдлина)
        {
            молвить << "пусто";
            воздать ноль;
        }

        для (целина сдвиг = 0; сдвиг < лдлина; ++сдвиг)
        {
            коли (слово[лев + (мерило)сдвиг] != слово[прав_нач + (мерило)сдвиг])
            {
                молвить << "пусто";
                воздать ноль;
            }
        }

        лев = лев + (мерило)лдлина;
        прав = прав_нач;
    }

    молвить << "оберег";
    воздать ноль;
}
